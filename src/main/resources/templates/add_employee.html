<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<html lang="en">
<head>
    <meta charset="utf-8" />
    <link rel="apple-touch-icon" sizes="76x76" th:href="@{/img/filename.jpg}" />
    <link rel="icon" type="image/png" th:href="@{/img/filename.jpg}" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>HRMS</title>
    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
    <meta name="viewport" content="width=device-width" />
    <link rel="stylesheet" type="text/css" th:href="@{/webjars/font-awesome/5.15.0/css/all.css}">
    <script rel="stylesheet"  th:src="@{/webjars/font-awesome/5.15.0/js/all.js}"></script>
    <link rel="stylesheet" type="text/css" th:href="@{/webjars/material-design-icons/4.0.0/material-icons.css}">
    <link th:href="@{/webjars/bootstrap/3.3.5/css/bootstrap.min.css}" rel="stylesheet" />
    <link rel="stylesheet" type="text/css" th:href="@{/webjars/bootstrap-material-design/0.5.10/css/bootstrap-material-design.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/webjars/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/webjars/bootstrap-select/1.12.4/css/bootstrap-select.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/css/bootstrap-clockpicker.css}">
    <link th:href="@{/css/material-dashboard.css}" rel="stylesheet"/>
    <link rel="stylesheet" th:href="@{/css/wizard_pic.css}">
</head>
<body>
<div class="wrapper" id="wrapper" style="display:none;">
    <div class="sidebar" data-active-color="primary" data-background-color="black" data-image="/img/sidebar-3.jpg">
        <div class="logo">
            <a  class="simple-text logo-mini">

            </a>

            <a href="#" class="simple-text logo-normal">
                HRMS
            </a>
        </div>

        <div class="sidebar-wrapper">
            <div class="user">
                <div class="photo">
                    <img th:src="@{${'/docs-upload/' +user.employee.image.name}}" />
                </div>
                <div class="info">
                    <a data-toggle="collapse" href="#collapseExample" class="collapsed">
                    <span th:text="${user.username}">
                        <b class="caret"></b>
                    </span>
                    </a>
                    <div class="clearfix"></div>
                    <div class="collapse" id="collapseExample">
                        <ul class="nav">
                            <li>
                                <a data-toggle="modal" data-target="#lock-modal">
                                    <span class="sidebar-mini"> CP </span>
                                    <span class="sidebar-normal"> Change Password </span>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <ul class="nav">
                <li >
                    <a th:href="@{/admin/dashboard}">
                        <i class="material-icons">dashboard</i>
                        <p> Dashboard </p>
                    </a>
                </li>
                <li>
                    <a th:href="@{/admin/employee}">
                        <i class="material-icons">people_alt</i>
                        <p> Employees </p>
                    </a>
                </li>
                <li >
                    <a th:href="@{/admin/structure}" >
                        <i class="material-icons">view_quilt</i>
                        <p> Structure </p>
                    </a>
                </li>
                <li>
                    <a th:href="@{/admin/leave}" >
                        <i class="material-icons">weekend</i>
                        <p>Leave </p>
                    </a>
                </li>
                <li>
                    <a data-toggle="collapse" href="#pagesAttendance">
                        <i class="material-icons">history_toggle_off</i>
                        <p> Attendance
                            <b class="caret"></b>
                        </p>
                    </a>

                    <div class="collapse" id="pagesAttendance">
                        <ul class="nav">
                            <li>
                                <a th:href="@{/admin/attendance/log}">
                                    <span class="sidebar-mini">AL</span>
                                    <span class="sidebar-normal">Attandance Log</span>
                                </a>
                            </li>
                            <li>
                                <a th:href="@{/admin/attendance/schedule}">
                                    <span class="sidebar-mini">SC</span>
                                    <span class="sidebar-normal">Schedule</span>
                                </a>
                            </li>
                        </ul>
                    </div>
                </li>
                <li sec:authorize="hasRole('ROLE_HR')">
                    <a data-toggle="collapse" href="#pagesExamples">
                        <i class="material-icons sidebar-mini">account_balance_wallet</i>
                        <p> Payment
                            <b class="caret"></b>
                        </p>
                    </a>

                    <div class="collapse" id="pagesExamples">
                        <ul class="nav">
                            <li class="active">
                                <a th:href="@{/hr/payroll}">
                                    <span class="sidebar-mini"> PR </span>
                                    <span class="sidebar-normal"> Payroll </span>
                                </a>
                            </li>
                            <li>
                                <a th:href="@{/hr/template}">
                                    <span class="sidebar-mini"> PM </span>
                                    <span class="sidebar-normal"> Pay Model </span>
                                </a>
                            </li>
                        </ul>
                    </div>
                </li>
                <li sec:authorize="hasRole('ROLE_HR')">
                    <a th:href="@{/hr/general}">
                        <i class="material-icons">tune</i>
                        <p> General </p>
                    </a>
                </li>
            </ul>
        </div>
    </div>


    <div class="main-panel">
        <nav class="navbar navbar-transparent navbar-absolute">
            <div class="container-fluid">
                <div class="navbar-minimize">
                    <button id="minimizeSidebar" class="btn btn-round btn-white btn-fill btn-just-icon">
                        <i class="material-icons visible-on-sidebar-regular">more_vert</i>
                        <i class="material-icons visible-on-sidebar-mini">view_list</i>
                    </button>
                </div>
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="#">ADD EMPLOYEE </a>
                </div>
                <div class="collapse navbar-collapse">
                    <ul class="nav navbar-nav navbar-right">

                        <li>
                            <button class="btn btn-primary"onclick="submitChanges()" style="color:#fff"><span class="material-icons">save</span>&nbsp;&nbsp;SAVE</button>
                        </li>
                        <li class="dropdown">
                            <a  class="dropdown-toggle" data-toggle="dropdown" data-color="success" >
                                <i class="material-icons">notifications</i>
                                <span class="notification" id="unreceived-size">0</span>
                                <p class="hidden-lg hidden-md">
                                    Notifications
                                    <b class="caret"></b>
                                </p>
                            </a>
                            <ul class="dropdown-menu panel-group"  id="unreceived-view"  role="tablist" aria-multiselectable="true">
                                <li th:each="reminder:${unreceivedReminders}">
                                    <a th:attr="onclick=${'viewUnReceived('+reminder.id+',this)'}">
                                        &nbsp;<span th:text="${reminder.day +' '+ reminder.date+' '+reminder.time}"></span>
                                    </a>
                                </li>
                            </ul>
                        </li>
                        <li>
                            <a th:href="@{/logout}" class="dropdown-toggle"  data-color="success">
                                <span class="material-icons">
                                  logout
                                </span>
                                <p class="hidden-lg hidden-md">Logout</p>
                            </a>
                        </li>
                        <li class="separator hidden-lg hidden-md"></li>
                    </ul>
                </div>
            </div>
        </nav>
        <div class="content">
            <div class="container-fluid">
                <form  class="form-horizontal">
                <div class="card">
                        <div class="card-header card-header-text" data-background-color="primary">
                            <h6 class="card-title">Personal</h6>
                        </div>
                        <div class="card-content">
                            <div class="row">
                                <div class="col-md-3">
                                    <div class="wizard-card">
                                        <div class="picture-container">
                                            <div class="picture">
                                                <img th:src="@{/img/default-avatar.png}" class="picture-src" id="wizardPicturePreview" title="" />
                                                <input type="file" id="wizard-picture">
                                            </div>
                                            <h6>Select Image</h6>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-9">
                                    <div class="input-group">
                                         <span class="input-group-addon">
                                            <i class="material-icons">record_voice_over</i>
                                        </span>
                                        <div class="form-group label-floating">
                                            <label class="control-label">Last Name <small>(required)</small></label>
                                            <input id="lastName"  type="text" class="form-control">
                                        </div>
                                    </div>
                                    <div class="input-group">
                                         <span class="input-group-addon">
                                            <i class="material-icons">face</i>
                                        </span>
                                        <div class="form-group label-floating">
                                            <label class="control-label">First Name <small>(required)</small></label>
                                            <input name="firstname"  id="firstName" type="text" class="form-control">
                                        </div>
                                    </div>
                                    <div class="input-group">
                                         <span class="input-group-addon">
                                            <i class="material-icons">person_pin</i>
                                        </span>
                                        <div class="form-group label-floating">
                                            <label class="control-label">Other Names</label>
                                            <input name="othernames" id="otherNames" type="text"   class="form-control">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row" style="margin-top: 30px">
                                <div class="col-md-6">
                                    <div class="input-group">
                                         <span class="input-group-addon">
                                            <i class="material-icons">contact_mail</i>
                                        </span>
                                        <div class="form-group label-floating">
                                            <label class="control-label">ID</label>
                                            <input name="lastname" id="nationalId"  type="text" class="form-control">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="input-group">
                                         <span class="input-group-addon">
                                            <i class="material-icons">record_voice_over</i>
                                        </span>
                                        <div class="form-group label-floating">
                                            <label class="control-label">Phone</label>
                                            <input id="phone"  type="text" class="form-control">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row" style="margin-top:20px">
                                <div class="col-md-6">
                                    <div class="input-group date datepicker-group">
                                        <div class="input-group-addon">
                                            <span class="material-icons">today</span>
                                        </div>
                                        <div class="form-group label-floating">
                                            <label class="control-label">Date of Birth</label>
                                            <input id="dob" type="text" class="form-control datetimepicker"  >
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="input-group date datepicker-group">
                                        <div class="input-group-addon">
                                            <span class="material-icons">today</span>
                                        </div>
                                        <div class="form-group label-floating">
                                            <label class="control-label">Date of Join</label>
                                            <input type="text" id="doj" class="form-control datetimepicker"  >
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="input-group">
                                         <span class="input-group-addon">
                                            <i class="material-icons">mail</i>
                                        </span>
                                        <div class="form-group label-floating">
                                            <label class="control-label">EMAIL</label>
                                            <input  id="email"  type="text" class="form-control">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <label class="col-sm-3 label-on-left">GENDER</label>
                                    <div class="col-sm-9">
                                        <div class="checkbox checkbox-inline">
                                            <label>
                                                <input type="checkbox" id="male_checkbox" name="optionsCheckboxes">MALE
                                            </label>
                                        </div>
                                        <div class="checkbox checkbox-inline">
                                            <label>
                                                <input type="checkbox" id="female_checkbox" name="optionsCheckboxes">FEMALE
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                        <div class="card-footer"></div>
                </div>
                <div class="card">
                    <div class="card-header card-header-text" data-background-color="primary">
                        <h6 class="card-title">Job</h6>
                    </div>
                    <div class="card-content">
                        <div class="col-md-6">
                            <div class="col-md-4" >
                                <h4 style="padding-top:8px;">Department</h4>
                            </div>
                            <div class="col-md-8">
                                <select class="selectpicker" data-style="btn btn-white btn-round" title="Single Select" id="department" name="department" required>
                                    <option disabled selected>Department</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="col-md-4" >
                                <h4 style="padding-top:8px;">Section</h4>
                            </div>
                            <div class="col-md-8">
                                <select class="selectpicker" data-style="btn btn-white btn-round" title="Single Select" id="section" name = "section" required>
                                    <option disabled selected>Section</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="col-md-4" >
                                <h4 style="padding-top:8px;">Job Title</h4>
                            </div>
                            <div class="col-md-8">
                                <select class="selectpicker" data-style="btn btn-white btn-round" title="Single Select" id="job-title" name="job-title" required>
                                    <option disabled selected>Job Title</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="col-md-4" >
                                <h4 style="padding-top:8px;">Category</h4>
                            </div>
                            <div class="col-md-8">
                                <select class="selectpicker" data-style="btn btn-white btn-round" title="Single Select" id="category" name = "category" required>
                                    <option disabled selected>Category</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="col-md-4" >
                                <h4 style="padding-top:8px;">Grade</h4>
                            </div>
                            <div class="col-md-8">
                                <select class="selectpicker" data-style="btn btn-white btn-round" title="Single Select" id="grade" name="grade" required>
                                    <option disabled selected>Grade</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="col-md-4" >
                                <h4 style="padding-top:8px;">Location</h4>
                            </div>
                            <div class="col-md-8">
                                <select class="selectpicker" data-style="btn btn-white btn-round" title="Single Select" id="location" name="location" required>
                                    <option disabled selected> Location</option>
                                </select>
                            </div>

                        </div>
                        <div class="col-md-6">
                            <div class="col-md-4" >
                                <h4 style="padding-top:8px;">Managers</h4>
                            </div>
                            <div class="col-md-8">
                                <select class="selectpicker" data-style="btn btn-white btn-round" title="Single Select" id="team" name="team" required>
                                    <option disabled selected>Managers</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <label class="col-sm-4 label-on-left" style="margin-top:26px;margin-left:5px">APPO</label>
                            <div class="col-sm-6">
                                <div class="col-sm-12 checkbox checkbox-inline" style="margin-left:10px">
                                    <label>
                                        <input type="checkbox" id="appo_y_checkbox"> Appo (Y)
                                    </label>
                                </div>
                                <div class="col-sm-12 checkbox checkbox-inline" style="padding-top:5px">
                                    <label>
                                        <input type="checkbox" id="appo_n_checkbox"> Appo (N)
                                    </label>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <label class="col-sm-5 label-on-left" style="margin-top:26px;margin-left:5px">EMPLOYMENT TYPE</label>
                                <div class="col-sm-6">
                                    <div class="col-sm-12 checkbox checkbox-inline" style="margin-left:10px">
                                        <label>
                                            <input type="checkbox" id="permanent_checkbox"> PERMANENT
                                        </label>
                                    </div>
                                    <div class="col-sm-12 checkbox checkbox-inline" style="padding-top:5px">
                                        <label>
                                            <input type="checkbox" id="temporary_checkbox"> CONTRACT
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="card-footer"></div>
                </div>
                <div class="card">
                    <div class="card-header card-header-text" data-background-color="primary">
                        <h6 class="card-title">Payment</h6>
                    </div>
                    <div class="card-content">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="input-group">
                                         <span class="input-group-addon">
                                            <i class="material-icons">payment</i>
                                        </span>
                                    <div class="form-group label-floating">
                                        <label class="control-label">Account Number</label>
                                        <input  id="accountPin" type="text" class="form-control">
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="input-group">
                                     <span class="input-group-addon">
                                        <i class="material-icons">payments</i>
                                    </span>
                                    <div class="form-group label-floating">
                                        <label class="control-label">KRA PIN</label>
                                        <input id="kra"  type="text" class="form-control">
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="input-group">
                                         <span class="input-group-addon">
                                            <i class="material-icons">account_balance</i>
                                        </span>
                                    <div class="form-group label-floating">
                                        <label class="control-label">Bank Name</label>
                                        <input id="bankName"  type="text" class="form-control">
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="input-group">
                                         <span class="input-group-addon">
                                            <i class="material-icons">account_balance_wallet</i>
                                        </span>
                                    <div class="form-group label-floating">
                                        <label class="control-label">Branch</label>
                                        <input id="branch"  type="text" class="form-control">
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="input-group">
                                         <span class="input-group-addon">
                                            <i class="material-icons">request_quote</i>
                                        </span>
                                    <div class="form-group label-floating">
                                        <label class="control-label">NSSF Pin</label>
                                        <input id="nssfPin"  type="text" class="form-control">
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="input-group">
                                         <span class="input-group-addon">
                                            <i class="material-icons">spa</i>
                                        </span>
                                    <div class="form-group label-floating">
                                        <label class="control-label">NHIF Pin</label>
                                        <input id="nhifPin"  type="text" class="form-control">
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="input-group">
                                         <span class="input-group-addon">
                                            <i class="material-icons">receipt_long</i>
                                        </span>
                                    <div class="form-group label-floating">
                                        <label class="control-label">Payroll No</label>
                                        <input id="payrollNumber" type="text" class="form-control">
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label class="col-sm-4 label-on-left" style="margin-top:28px;margin-left:5px">PAYMENT MODE</label>
                                <div class="col-sm-6">
                                    <div class="col-sm-12 checkbox checkbox-inline" style="margin-left:10px">
                                        <label>
                                            <input type="checkbox" id="bank_checkbox">BANK
                                        </label>
                                    </div>
                                    <div class="col-sm-12 checkbox checkbox-inline" style="padding-top:5px">
                                        <label>
                                            <input type="checkbox" id="cash_checkbox">CASH
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="card-footer"></div>

                </div>
                </form>
            </div>
        </div>
    </div>
</div>

<div class="loader-wrapper">
    <div class="dot-container">
        <div class="dot dot1"></div>
        <div class="dot dot2"></div>
        <div class="dot dot3"></div>
    </div>
</div>

<div class="modal fade bd-example-modal-sm" tabindex="-1" role="dialog" aria-labelledby="gridSystemModalLabel" id="lock-modal">
    <div class="modal-dialog modal-sm" role="document">
        <div class="modal-content">
            <div class="modal-body" >
                <div style="display:flex;justify-content: center;margin-top:-70px">
                    <a href="#pablo">
                        <img class="avatar" style="height:100px;width: 80px" th:src="@{${'/docs-upload/' +user.employee.image.name}}" alt="...">
                    </a>
                </div>
                <form id="lock-form">
                    <div class="row">
                        <div class="col-md-12" style="display: flex;justify-content:center;">
                            <h4 class="card-title" th:text="${user.username}"></h4>
                        </div>
                        <div class="col-md-12">
                            <div class="form-group label-floating">
                                <label class="control-label">Current Password</label>
                                <input type="text" id="current-password" class="form-control secure" autocomplete="off" required>
                            </div>
                            <div class="form-group label-floating">
                                <label class="control-label">New Password <small> (minimum 4 characters)</small></label>
                                <input type="text" id="new-password" class="form-control secure" autocomplete="off" required>
                            </div>
                            <div class="form-group label-floating">
                                <label class="control-label">Confirm New Password</label>
                                <input type="text" id="confirm-password" class="form-control secure" autocomplete="off" required>
                            </div>
                        </div>
                        <div class="col-md-12" style="display: flex;justify-content: center">
                            <button  id="submit-password" class="btn btn-primary btn-round" style="color:#ffffff">Submit</button>
                        </div>
                    </div>

                </form>
            </div>
        </div>
    </div>
</div>

</body>
<script th:src="@{/webjars/jquery/3.3.1/jquery.js}"></script>
<!--<script th:src="@{/js/bootstrap.min.css}"></script>-->
<script th:src="@{/webjars/bootstrap-material-design/0.5.10/js/material.js}"></script>
<script th:src="@{/webjars/bootstrap/3.3.5/js/bootstrap.js}"></script>
<script th:src="@{/js/perfect-scrollbar.jquery.min.js}" type="text/javascript"></script>

<!-- Library for adding dinamically elements -->
<script th:src="@{/js/arrive.min.js}" type="text/javascript"></script>

<!-- Forms Validations Plugin -->
<script th:src="@{/js/jquery.validate.min.js}"></script>

<!--  Plugin for Date Time Picker and Full Calendar Plugin-->
<script th:src="@{/webjars/momentjs/2.24.0/moment.js}"></script>

<!--  Plugin for the Wizard, full documentation here: https://github.com/VinceG/twitter-bootstrap-wizard -->
<script th:src="@{/js/jquery.bootstrap-wizard.js}"></script>

<!--  Notifications Plugin, full documentation here: https://bootstrap-notify.remabledesigns.com/    -->
<script th:src="@{/webjars/bootstrap-notify/3.1.3-1/bootstrap-notify.js}"></script>

<!--   Sharrre Library    -->
<script th:src="@{/js/jquery.sharrre.js}"></script>

<!-- Vector Map plugin, full documentation here: https://jvectormap.com/documentation/ -->
<script th:src="@{/js/jquery-jvectormap.js}"></script>

<!-- Sliders Plugin, full documentation here: https://refreshless.com/nouislider/ -->
<script th:src="@{/js/nouislider.min.js}"></script>

<!--  Plugin for Select, full documentation here: https://silviomoreto.github.io/bootstrap-select -->
<script th:src="@{/webjars/bootstrap-select/1.12.4/js/bootstrap-select.js}"></script>

<!--  DataTables.net Plugin, full documentation here: https://datatables.net/    -->
<script th:src="@{/webjars/datatables/1.10.12/js/jquery.dataTables.js}"></script>

<!-- Sweet Alert 2 plugin, full documentation here: https://limonte.github.io/sweetalert2/ -->
<script th:src="@{/js/sweetalert2.js}"></script>

<!-- Plugin for Fileupload, full documentation here: https://www.jasny.net/bootstrap/javascript/#fileinput -->
<script th:src="@{/js/jasny-bootstrap.min.js}"></script>

<!--  Full Calendar Plugin, full documentation here: https://github.com/fullcalendar/fullcalendar    -->
<script th:src="@{/js/fullcalendar.min.js}"></script>

<!-- Plugin for Tags, full documentation here: https://github.com/bootstrap-tagsinput/bootstrap-tagsinputs  -->
<script th:src="@{/js/jquery.tagsinput.js}"></script>

<script th:src="@{/webjars/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.js}"></script>

<!-- Material Dashboard javascript methods -->
<script th:src="@{/js/material-dashboard.js}"></script>
<script th:src="@{/js/wickedpicker.min.js}"></script>
<script th:src="@{/webjars/sockjs-client/1.1.2/sockjs.min.js}"></script>
<script th:src="@{/webjars/stomp-websocket/2.3.3-1/stomp.min.js}"></script>
<script th:src="@{/webjars/font-awesome/5.15.0/js/all.js}"></script>
<script  th:src="@{/js/bootstrap-clockpicker.js}"></script>
<script th:inline="javascript">
    var grades = [[${grades}]];
    var sections = [[${sections}]];
    var categories = [[${categories}]];
    var locations = [[${locations}]];
    var departments =[[${departments}]];
    var jobtitles = [[${jobtitles}]];
    var teams = [[${teams}]];
    var unreceivedReminders = [[${unreceivedReminders}]];
</script>
<script>
    const url = window.location.href.split('/');
    $(document).ready(function() {
        $("#wizard-picture").change(function() {
            readURL(this);
        });
        document.getElementById('female_checkbox').addEventListener('click',function(){
            checkboxClick(document.getElementById('female_checkbox'),document.getElementById('male_checkbox'))
        });
        document.getElementById('male_checkbox').addEventListener('click',function(){
            checkboxClick(document.getElementById('male_checkbox'),document.getElementById('female_checkbox'))
        });
        document.getElementById('permanent_checkbox').addEventListener('click',function(){
            checkboxClick(document.getElementById('permanent_checkbox'),document.getElementById('temporary_checkbox'))
        });
        document.getElementById('temporary_checkbox').addEventListener('click',function(){
            checkboxClick(document.getElementById('temporary_checkbox'),document.getElementById('permanent_checkbox'))
        });
        document.getElementById('bank_checkbox').addEventListener('click',function(){
            checkboxClick(document.getElementById('bank_checkbox'),document.getElementById('cash_checkbox'))
        });
        document.getElementById('cash_checkbox').addEventListener('click',function(){
            checkboxClick(document.getElementById('cash_checkbox'),document.getElementById('bank_checkbox'))
        });
        document.getElementById('appo_y_checkbox').addEventListener('click',function(){
            checkboxClick(document.getElementById('appo_y_checkbox'),document.getElementById('appo_n_checkbox'))
        });
        document.getElementById('appo_n_checkbox').addEventListener('click',function(){
            checkboxClick(document.getElementById('appo_n_checkbox'),document.getElementById('appo_y_checkbox'))
        });
    });
    getOptions(departments,'department');
    getOptions(locations,'location');
    getOptions(sections,'section');
    getOptions(categories,'category');
    getOptions(grades,'grade');
    getOptions(jobtitles,'job-title');
    getOptions(departments,'department');
    const manager = document.getElementById('manager');
    if (teams!=null){
        for(let opt of teams){
            let option = document.createElement("option");
            option.value = opt.id;
            option.text = opt.manager.name;
            select.add(option,select.opt);
        }
        $('.selectpicker').selectpicker('refresh');
    }

    function readURL(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();

            reader.onload = function(e) {
                $('#wizardPicturePreview').attr('src', e.target.result).fadeIn('slow');
            }
            reader.readAsDataURL(input.files[0]);
        }
    }
    function checkboxClick(a,b){
        a.checked =  true;
        b.checked = false;
    }
    function getOptions(options,selectId){
        const select = document.getElementById(selectId);
        for(let opt of options){
            let option = document.createElement("option");
            option.value = opt.name;
            option.text = opt.name;
            select.add(option,select.opt);
        }
        $('.selectpicker').selectpicker('refresh');
    }
    function selectOptions(selectId,optionValue){
        $(`#${selectId}`).selectpicker('val', optionValue);
    }
    function submitChanges(){
        const lastName = document.getElementById('lastName').value;
        const firstName = document.getElementById('firstName').value;
        const otherNames = document.getElementById('otherNames').value;
        const phone = document.getElementById('phone').value;
        const nationalId  = document.getElementById('nationalId').value;
        const dob =  document.getElementById('dob').value;
        const doj = document.getElementById('doj').value;
        const email = document.getElementById('email').value;
        let gender;
        if(document.getElementById('male_checkbox').checked){
            gender =  'male';
        }
        else if(document.getElementById('female_checkbox').checked){
            gender =  'female';
        }
        const accountPin= document.getElementById('accountPin').value;
        const kra= document.getElementById('kra').value;
        const nssfPin= document.getElementById('nssfPin').value;
        const nhifPin= document.getElementById('nhifPin').value;
        const branch= document.getElementById('branch').value;
        const bankName= document.getElementById('bankName').value;
        const payrollNumber= document.getElementById('payrollNumber').value;
        let paymentMode;
        if(document.getElementById('cash_checkbox').checked){
            paymentMode =  'cash';
        }
        else if(document.getElementById('bank_checkbox').checked){
            paymentMode =  'bank';
        }
        const department=document.getElementById('department').value;
        const section =document.getElementById('section').value;
        const jobTitle = document.getElementById('job-title').value;
        const category = document.getElementById('category').value;
        const grade = document.getElementById('grade').value;
        const location = document.getElementById('location').value;
        const teamId = document.getElementById('team').value;
        let appo = "false";
        if(document.getElementById('appo_y_checkbox').checked){
            appo =  "true";
        }
        let employmentType;
        if(document.getElementById('permanent_checkbox').checked){
            employmentType =  'permanent';
        }
        else if(document.getElementById('temporary_checkbox').checked){
            employmentType =  'contract';
        }
        const formData = new FormData();
        formData.append("firstName",firstName);
        formData.append("lastName",lastName);
        formData.append("otherNames",otherNames);
        formData.append("nationalId",nationalId);
        formData.append("phone",phone);
        formData.append("email",email);
        formData.append("dob",dob);
        formData.append("doj",doj);
        formData.append("gender",gender);
        formData.append("department",department);
        formData.append("section",section);
        formData.append("category",category);
        formData.append("jobTitle",jobTitle);
        formData.append("grade",grade);
        formData.append("location",location);
        formData.append("team",teamId);
        formData.append("appo",appo);
        formData.append("employmentType",employmentType);
        formData.append("accountPin",accountPin);
        formData.append("bankName",bankName);
        formData.append("branch",branch);
        formData.append("nssfPin",nssfPin);
        formData.append("nhifPin",nhifPin);
        formData.append("kra",kra);
        formData.append("payrollNumber",payrollNumber);
        formData.append("paymentMode",paymentMode);
        const file = document.getElementById('wizard-picture').files[0];
        if(typeof file === "undefined"){
            formData.append("imageSet",0);
        }
        else{
            formData.append("image",file);
            formData.append("imageSet",1);
        }
        fetch("/api/admin/employees/add",{
            method:'POST',
            body:formData
        })
        .then(function(res){
            if(!res.ok){
                errorNotify("Something Went Wrong...");
                throw Error(res.statusText);
            }
            else{
                swal({
                    title: 'EDIT',
                    text: 'Employee Added Successfully',
                    type: 'success',
                    timer: 1500,
                    confirmButtonClass: "btn btn-success",
                    buttonsStyling: false
                })
            }
        })
        .then(function(){
            window.location="/admin/employee"
        })
    }
</script>
<script th:src="@{/js/collection.js}"></script>
</html>